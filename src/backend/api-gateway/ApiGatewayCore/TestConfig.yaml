listeners:
- name: listener1
  protocol: 
  address:
    address: 127.0.0.1
    port: 4000
  route-config:
    services:
    - user-service
    - auth-service
  authorization:
    type: JWT
      jwt-validator:
      cluster-name: auth-service
      url: /api/user/auth/validate-token
      success-status: 
        - "200"
  disallow-headers:
    - trace-id
  thread-count: 1

clusters:
- services:
  - name: auth-service
    protocol: http
    address:
      address: 127.0.0.1
      port: 5000
    prefix: /api/user/auth
    custom-filter:
      name: CustomFilter
      path: /ApiGateway/CustomFilter.cs
    connect-timeout: 5s
    authorization: false

  - name: user-service
    protocol: http
    address:
      address: 127.0.0.1
      port: 5000
    prefix: /api/user
    connect-timeout: 5s
    authorization: true

  - name: community-service
    protocol: http
    address:
      address: 127.0.0.1
      port: 6000
    prefix: /api/community
    custom-filter:
      name: CustomFilter
      path: /ApiGateway/CustomFilter.cs
    connect-timeout: 5s
    authorization: true

  - name: chat-service
    protocol: http
    address:
      address: 127.0.0.1
      port: 7000
    prefix: /service2
    custom-filter: 
    connect-timeout: 5s
    authorization: true